
<main class="container mt-5">
  <section class="card shadow rounded">
    <div class="card-header bg-primary text-white">
      <h2 class="mb-0">Agregar Tarea</h2>
    </div>
    <div class="card-body">
        <form (ngSubmit)="onSearchTask()">
            <div class="mb-3 row">
              <label for="id" class="col-sm-2 col-form-label">ID</label>
              <div class="col-sm-10">
                <input type="number" id="id" class="form-control" [(ngModel)]="taskId" name="taskId" placeholder="Ej: 1" required>
              </div>
            </div>
            <button type="submit" class="btn btn-primary">Buscar Tarea</button>
          </form>

          <div *ngIf="foundTask">
            <h3>Tarea Encontrada:</h3>
            <p><strong>ID:</strong> {{ foundTask.id }}</p>
            <p><strong>Título:</strong> {{ foundTask.title }}</p>
            <p><strong>Completada:</strong> {{ foundTask.completed ? 'Sí' : 'No' }}</p>
            <p><strong>Categoría:</strong> {{ foundTask.category || 'No asignada' }}</p>
          </div>

          <div *ngIf="!foundTask && taskId">
            <p class="text-danger">No se encontró tarea con ID {{ taskId }}.</p>
          </div>

        <Section>
            <br>
        </Section>
     <form (ngSubmit)="saveTask()">
        <div class="mb-3 row">
          <label for="title" class="col-sm-2 col-form-label">Título de la tarea</label>
          <div class="col-sm-10">
            <input
              type="text"
              id="title"
              class="form-control"
              placeholder="Ej: Estudiar Angular"
              [(ngModel)]="newTask.title"
              name="title"
              required
            />
          </div>
        </div>
        <div class="mb-3 row">
          <label for="category" class="col-sm-2 col-form-label">Categoría</label>
          <div class="col-sm-10">
            <input
              type="text"
              id="category"
              class="form-control"
              placeholder="Ej: Estudio"
              [(ngModel)]="newTask.category"
              name="category"
            />
          </div>
        </div>
        <div class="mb-3 row">
          <label class="col-sm-2 col-form-label">Completada</label>
          <div class="col-sm-10 d-flex align-items-center">
            <input
              type="checkbox"
              id="completed"
              class="form-check-input"
              [(ngModel)]="newTask.completed"
              name="completed"
            />
            <label for="completed" class="form-check-label ms-2">Sí / No</label>
          </div>
        </div>
        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
          <button type="submit" class="btn btn-primary">
            Guardar Tarea
          </button>
        </div>
      </form>
    </div>
  </section>

  <hr />

  <section class="mt-4">
    <h2>Lista de Tareas</h2>
    <div class="table-responsive">
      <table class="table table-striped table-bordered">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Título</th>
            <th scope="col">Categoría</th>
            <th scope="col">Estado</th>
            <th scope="col">Acciones</th>
          </tr>
        </thead>
        <tbody>
  <tr *ngFor="let task of tasks">
    <td>{{ task.id }}</td>
    <td>{{ task.title }}</td>
    <td>{{ task.category || 'N/A' }}</td>
    <td>{{ task.completed ? 'Completada' : 'Pendiente' }}</td>
    <td>
        <button
            (click)="toggleCompleted(task)"
            class="btn btn-sm"
            [ngClass]="task.completed ? 'btn-success' : 'btn-warning'"
        >
            {{ task.completed ? 'Desmarcar' : 'Marcar' }}
        </button>
        <button (click)="deleteTask(task.id)" class="btn btn-danger btn-sm ms-2">
            Eliminar
        </button>
    </td>
</tr>
        </tbody>
      </table>
      <div *ngIf="tasks.length === 0" class="alert alert-info text-center"> No hay tareas  </div>
    </div>
  </section>
</main>